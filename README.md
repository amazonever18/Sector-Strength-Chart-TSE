# 東証業種別強弱チャート(Sector-Strength-Chart-TSE)

<br>

東証一部の各セクターが市場平均であるTOPIXに対してどの程度のパフォーマンスを誇るのかを算出するWebアプリケーションです。

![IMG_0270](https://user-images.githubusercontent.com/74766908/148157962-20b19cf2-7c12-494a-9263-d25775c61e87.jpg)

デモサイト<br>
https://sector-strength.herokuapp.com

<br>

## 開発のきっかけ

このWebアプリはトレーダー歴2年、プログラミング歴8ヶ月の私が最初に作ったプロダクトになります。

今でこそ株価指数CFDやFXを中心にトレードしている私ですが、トレーディングを始めた当初はもっぱら日本株を扱っていました。

株式投資の難しいところはやはり銘柄選定です。何千とある銘柄の中から投資をするに値する銘柄を見つけなければなりません。

投資初心者なりに色々考えた末に思いついたのが

「直近で最も買われている業種の最も買われている銘柄を買い、最も売られている業種の最も売られている銘柄を空売りする」

というものでした。この頃から私は順張りが好きなトレンドフォロワーだったようです。

東京証券取引所に上場している企業はいくつかの業種に分けることができ、東証株価指数33業種のように成績が数値化されています。

あとはこの指標をチャート等で比較すればいいのですが、なんとそのようなチャートがどこにも見当たらないのです！

いくらググっても証券会社や経済誌の過去の分析記事ばかりで、リアルタイムで業種のパフォーマンスを算出しているサイトがどこにもありません。

つまり日本株の投資家は各業種のパフォーマンスを日々の値動きやニュース等でぼんやりとしか把握していない可能性があります。

それで上手くいっているのなら言うことないのですが、やはり客観的な指標を一目で把握したいですよね。

ということで作ったのがこのWebアプリになります。

<br>

## Webアプリケーションの説明

「ホーム」の真ん中にデカデカとあるのがお目当てのチャートです。

左上に「1ヶ月」「3ヶ月」「1年」「5年」「最大」とあるように、それぞれの期間で各業種のパフォーマンスが分かります。

縦軸の上に行くほどその業種はTOPIXに対して強く、下に行くほど弱いと言えます。

例えば、1年のチャートで食品の最新値が＋20%だった場合、食品の1年間のパフォーマンスはTOPIXと比較して20%良かったことを意味します。

なぜ"TOPIXに対して"という比較にしたかというと、市場平均と比較しなければ全業種の中の相対的なパフォーマンスが測れないからです。


<br>

## 簡単な内部ロジックの説明

#### 1. TOPIXおよびTOPIX-17シリーズの価格データの取得

サードパーティーのライブラリを使ってYahoo FinanceからTOPIXとTOPIX−17シリーズの価格データを取得します。

#### 2. データ整形を施した後、対TOPIX指数を算出

Pandasのデータフレームを使用してデータの抽出や欠損値・外れ値の処理をした上で、チャートに出力する対TOPIX指数を算出します。


#### 3. データベースに格納

SQLAlchemyを使用してローカルではSQLite、デプロイ先のHerokuではHeroku Postgresにデータを格納します。


#### 4. チャートに描画

Google Chart Toolsを使用して対TOPIX指数をチャートに描画します。

WebアプリケーションのフレームワークにはFlaskを使用しています。


<br>
  

## 解決出来ること

#### 
特徴1でも述べましたが、笑顔をカメラに向けるというユーザーの能動的な行動を押印のトリガーとしているため、「本人の意思確認」という行政上のはんこの役割を再現しています。

#### 婚姻届にはんこを押すことの価値はそのまま残す
フォームに必要事項を記入しマイナンバーで本人確認…のように誰にでもできる操作ではなく、カップルが二人でカメラに映るという情緒的なステップを盛り込むことで、心を込めてはんこを押した時のような雰囲気を疑似体験できるようにしました。
これにより、特徴2でも述べましたが、婚姻届の提出を機械的な手続きにせず、入籍日を思い出に残るものにしています。

<br>

## 今後の展望

* なりすまし防止のため、身分証明書の写真と照らし合わせた顔認証を実装すれば、より「本人の意思確認」としての本プロダクトの機能を強められます。

* フォーム入力による文書作成システムと、顔認証による押印システムは、婚姻届以外のデジタル文書にも応用できます。

* 現在はフォームに入力された苗字からはんこの画像を生成していますが、自分ではんこの画像をアップロードできるようにすれば、はんこの画像データが現在のはんこに変わる商材となり、印章業界のピンチも救えるのではないかと考えています。

* 婚姻届pdfに、ユーザーが描いた好きな絵をcanvasで貼り付けられる機能を実装して、より自分たちオリジナルの婚姻届を作れる体験を提供したいと考えています。

<br>

## 注力したこと（こだわり等）

* アプリケーションのUIとロゴのデザイン。「はんこ」は日本独自の文化なので、和婚をイメージした配色で画面を構成しています。婚姻届の入力フォームは、無機的にならないよう本物の婚姻届に近い見た目になるようにしました。

* 笑顔が100%になったとき再生される、はんこを押すアニメーション。ユーザー側から画面の中の婚姻届に向けてはんこを押したように見せるため、はんこの画像が手前から画面奥に向かってアニメーションするようにしました。

* 笑顔の程度がリアルタイムで横のメーターに表示される。顔のマークが動いて笑顔の程度を表すようにし、はんこを押す前に楽しい雰囲気を演出できるようにしました。

* どんな名字でも印鑑を生成することが可能です。ユーザーが入力した名字を自動で円の中心に配置し、印鑑の画像を生成するジェネレーターを1から開発しました。

<br>

## 開発技術
### 活用した技術
#### フレームワーク・ライブラリ・モジュール
* flask
* opencv
* jquery
* javascript

#### API・データ
* [face-api.js](https://github.com/justadudewhohacks/face-api.js)

#### デバイス
* Webカメラ

### 独自技術
#### ハッカソンで開発した独自機能・技術
* アプリケーションのデザイン
* [リアルタイム笑顔判定](https://github.com/jphacks/C_2012/blob/develop/static/js/smilecamera.js)
  * リアルタイムで笑顔の状態を測定。
  * 横のメーターに表示。
* [印鑑ジェネレーター](https://github.com/jphacks/C_2012/blob/develop/create_stamps.py)
  * 入力された名字から自動で印鑑を生成。
* [婚姻届(png)に必要事項、印鑑、写真を合成](https://github.com/jphacks/C_2012/blob/develop/create_pdf.py)
